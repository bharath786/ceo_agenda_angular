<div class="">

  <!-- For Structure Tree -->
  <div class="col-sm-4">
    <div class="portlet-title">
      <div class="caption">
        <i class="fa fa-cogs"></i>&nbsp; Organization Structure
      </div>

    </div>

    <p-tree [value]="files" selectionMode="single" [(selection)]="selectedFile" (onNodeSelect)="nodeSelect($event)"></p-tree>
  </div>

  <!-- For Structure tree data -->
  <div class="col-sm-8">
    <!-- For Organization Update -->
    <form [formGroup]="organizationform" (ngSubmit)="onSubmitOrganization(organizationform.value)"
      #organizationupdateform="ngForm" class="form-horizontal">
      <div *ngIf="allforms == 'updateorganization'" class="col-sm-12 clearfix gridrole" style="border: 1px solid rgb(204, 204, 204); padding: 20px; border-radius: 3px;">
        <h4 class="modal-title"><span style="padding-left: 13px;" class="bold">Organization Details</span>
          <a (click)='adddiv(1)' class="pull-right btn btn-primary">Add Division</a></h4>
        <br>
        <div class="col-xs-12">
          <div class="form-group">
            <label class="col-md-12 lblfnt">Organization Name</label>
            <div class="col-md-12">
              <input formControlName="organizationName" class="form-control" maxlength="50" type="text" placeholder="Organization Name">
              <mat-error *ngIf="organizationform.controls.organizationName.errors?.required && organizationform.controls.organizationName.touched">Organization
                Name is required</mat-error>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-12 lblfnt">Description</label>
            <div class="col-md-12">
              <textarea class="form-control" cols="20" maxlength="500" formControlName="organizationDescription"
                placeholder="Description" rows="5"></textarea>
              <mat-error *ngIf="organizationform.controls.organizationDescription.errors?.required && organizationform.controls.organizationDescription.touched">
                Organization Description is required</mat-error>
            </div>
          </div>
          <div class="pull-right" style="margin-top: 25px;">
            <button [disabled]="!organizationupdateform.form.valid" class="btn btn-success" id="btnupdateFimrDiv" type="submit">Update</button>
            <button type="button" id="btn_firmdiv" class="btn btn-danger hide" data-toggle="modal" data-target="#Mymodel-FirmDivDelete"
              data-tooltip="tooltip" data-placement="top" title="" value="" data-original-title="Delete">
              <i class="fa fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </form>

    <!-- For Division Update and Add -->
    <div class="" *ngIf="allforms == 'adddivision' || allforms == 'updatedivision'">
      <form [formGroup]="divisionform" (ngSubmit)="onSubmitDivision(divisionform.value)" #divisionupsertform="ngForm"
        class="form-horizontal">
        <div class="col-sm-12 clearfix gridrole" style="border: 1px solid rgb(204, 204, 204); padding: 20px; border-radius: 3px;">
          <h4 class="modal-title"><span style="padding-left: 13px;" class="bold">{{ allforms == 'adddivision' ? 'Add
              Division'
              :'Edit Division Details'}}</span>
            <a *ngIf="allforms == 'updatedivision'" class="pull-right btn btn-primary" (click)=addLoc(1)>Add Location
            </a></h4>
          <br>
          <div class="col-xs-12">
            <div class="form-group">
              <label class="add-member-label add-member-input col-md-12 lblfnt">Division Name</label>
              <div class="col-md-12">
                <input formControlName="divName" class="form-control FirstLetterCapital" maxlength="50" type="text"
                  placeholder="Enter Division Name">
                <mat-error *ngIf="divisionform.controls.divName.errors?.required && divisionform.controls.divName.touched">
                  Division Name is required</mat-error>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-12 lblfnt">Contact Number</label>
              <div class="col-md-12">
                <input formControlName="phoneNumber" (keypress)="keyPress($event)" minlength=10 maxlength=14 class="form-control"
                  type="text" placeholder="Enter Contact Number">
                <mat-error *ngIf="divisionform.controls.phoneNumber.errors?.required && divisionform.controls.phoneNumber.touched">Contact
                  Number is required</mat-error>
                <mat-error *ngIf="divisionform.controls.phoneNumber.hasError('minlength') && divisionform.controls.phoneNumber.touched">Contact Number isn't valid</mat-error>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-12 lblfnt">Address</label>
              <div class="col-md-12">
                <textarea formControlName="address" class="form-control" maxlength="500" cols="15" id="updatevcDesc"
                  name="firmDivisionDesc" placeholder="Address" rows="5"></textarea>
                <mat-error *ngIf="divisionform.controls.address.errors?.required && divisionform.controls.address.touched">
                  Division Address is required</mat-error>
              </div>
            </div>


            <div *ngIf="allforms == 'adddivision'" class="pull-right" style="margin-top: 25px;">
              <button [disabled]="!divisionupsertform.form.valid" class="btn btn-success" id="btnupdateFimrDiv" type="submit">Save</button>
            </div>
            <div *ngIf="allforms == 'updatedivision'" class="pull-right" style="margin-top: 25px;">
              <button [disabled]="!divisionupsertform.form.valid" class="btn btn-success marginbtn" id="btnupdateFimrDiv"
                type="submit">Update</button>
              <!-- <button (click)="onDeleteDivision(divisionform.value)" type="button" id="btn_firmdiv" class="btn btn-danger marginbtn"
                data-toggle="modal" data-target="#Mymodel-FirmDivDelete" data-tooltip="tooltip" data-placement="top"
                title="" value="" data-original-title="Delete">
                <i class="fa fa-trash"></i>
              </button> -->
              <button type="button" mwlConfirmationPopover [popoverTitle]="popoverTitle" [confirmText]="confirmText"
                [cancelText]="cancelText" [popoverMessage]="popoverMessage" placement="left" (confirm)="onDeleteDivision(divisionform.value)"
                class="btn btn-danger marginbtn" data-toggle="modal" data-tooltip="tooltip" data-original-title="Delete">
                <i class="fa fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- For Location Adding and Update -->
    <div class="" *ngIf="allforms == 'updatelocation' || allforms == 'addlocation'">
      <form [formGroup]="locationform" (ngSubmit)="onSubmitLocation(locationform.value)" #locationupsertform="ngForm"
        class="form-horizontal">
        <div class="col-sm-12 clearfix gridrole" style="border: 1px solid rgb(204, 204, 204); padding: 20px; border-radius: 3px;">
          <h4 class="modal-title"><span style="padding-left: 13px;" class="bold">{{ allforms == 'addlocation' ? 'Add
              Location'
              :'Edit Location Details'}}</span>
            <a *ngIf="allforms == 'updatelocation'" class="pull-right btn btn-primary" (click)=addEntity(1)>Add Entity
            </a>
          </h4>
          <br>
          <div class="col-xs-12">
            <div class="form-group">
              <label class="col-md-12 lblfnt">Country</label>
              <div class="col-md-12">
                <mat-select placeholder='Select Country' formControlName='countryId' [ngClass]="{'disablecustom': allforms=='updatelocation'}"
                  class="form-control" (selectionChange)="onCountrySelect($event.value)">
                  <mat-option *ngFor="let value of countries" [value]="value['countryId']">{{value['countryName']}}</mat-option>
                </mat-select>
                <mat-error *ngIf="locationform.controls.countryId.errors?.required && locationform.controls.countryId.touched">
                  Please Select your Country</mat-error>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-12 lblfnt">Description</label>
              <div class="col-md-12">
                <textarea formControlName='description' maxlength="500" class="form-control" cols="20" id="updatevcDesc"
                  name="firmDivisionDesc" placeholder="Description" rows="5"></textarea>
                <mat-error *ngIf="locationform.controls.description.errors?.required && locationform.controls.description.touched">
                  Location Description is required</mat-error>
              </div>
            </div>


            <div *ngIf="allforms == 'addlocation'" class="pull-right" style="margin-top: 25px;">
              <button [disabled]="!locationupsertform.form.valid" class="btn btn-success pull-right" id="btnupdateFimrDiv"
                type="submit">Save</button>
            </div>
            <div *ngIf="allforms == 'updatelocation'" class="pull-right" style="margin-top: 25px;">
              <button class="pull-right" type="button" mwlConfirmationPopover [popoverTitle]="popoverTitle"
                [confirmText]="confirmText" [cancelText]="cancelText" [popoverMessage]="popoverMessage" placement="left"
                (confirm)="onDeleteLocation(locationform.value)" class="btn btn-danger marginbtn pull-right"
                data-toggle="modal" data-tooltip="tooltip" data-original-title="Delete">
                <i class="fa fa-trash"></i>
              </button>

              <button [disabled]="!locationupsertform.form.valid" class="btn btn-success marginbtn pull-right" type="submit">Update</button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- For Entity Adding and Updating -->
    <div class="" *ngIf="allforms == 'addEntity'|| allforms == 'updateentity'">
      <form [formGroup]="entityform" (ngSubmit)="onSubmitEntity(entityform.value)" #entityupsertform="ngForm">
        <div class="gridrole" style="border: 1px solid rgb(204, 204, 204); padding: 20px; border-radius: 3px;">
          <h4 class="modal-title"><span style="padding-left: 13px;" class="bold">{{ allforms == 'addEntity' ? 'Add
              Entity' :'Edit Entity Details'}}</span>
          </h4>
          <br>
          <div class="form-group">
            <label class="col-md-12 add-member-label add-member-input col-md-12 lblfnt">Entity Name</label>
            <div class="col-md-12">
              <input formControlName="entityName" class="form-control" maxlength="50" type="text" placeholder="Enter Entity Name">
              <mat-error *ngIf="entityform.controls.entityName.errors?.required && entityform.controls.entityName.touched">
                Entity Name is required</mat-error>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-12 add-member-label add-member-input col-md-12 lblfnt">Contact Number</label>
            <div class="col-md-12">
              <input formControlName="phoneNumber" (keypress)="keyPress($event)" minlength=10 maxlength=14 class="form-control"
                type="text" placeholder="Enter Contact Number">
              <mat-error *ngIf="entityform.controls.phoneNumber.errors?.required && entityform.controls.phoneNumber.touched">Phone
                Number is required</mat-error>
              <mat-error *ngIf="entityform.controls.phoneNumber.hasError('minlength') && entityform.controls.phoneNumber.touched">Contact Number isn't valid</mat-error>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-12 add-member-label add-member-input col-md-12 lblfnt">State</label>
            <div class="col-md-12">
              <mat-select placeholder='Select State' formControlName='stateId' class="form-control" (selectionChange)="onStateSelect($event.value)">
                <mat-option *ngFor="let value of states" [value]="value['stateId']">{{value['stateName']}}</mat-option>
              </mat-select>
              <mat-error *ngIf="entityform.controls.stateId.errors?.required && entityform.controls.stateId.touched">
                Please Select your State</mat-error>
            </div>
          </div>
          <div *ngIf="cities != 0" class="form-group">
            <label class="col-md-12 add-member-label add-member-input col-md-12 lblfnt">City</label>
            <div class="col-md-12">
              <mat-select placeholder='Select City' formControlName='cityId' class="form-control">
                <mat-option *ngFor="let city of cities" [value]="city['cityId']">{{city['cityName']}}</mat-option>
              </mat-select>
              <mat-error *ngIf="entityform.controls.cityId.errors?.required && entityform.controls.cityId.touched">
                Please Select your City</mat-error>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-12 add-member-label add-member-input col-md-12 lblfnt">Address</label>
            <div class="col-md-12">
              <textarea formControlName="address" class="form-control" cols="20" maxlength="500" placeholder="Address"
                rows="5"></textarea>
              <mat-error *ngIf="entityform.controls.address.errors?.required && entityform.controls.address.touched">
                Entity is required</mat-error>
            </div>
          </div>
          <a class="pull-right btn btn-primary" (click)=selectDimension(1)>Select Dimensions
          </a>

          <div *ngIf="allforms == 'addEntity'" class="pull-right" style="margin-top: 25px;">
            <button [disabled]="!entityupsertform.form.valid" class="btn btn-success pull-right" id="btnupdateFimrDiv" type="submit">Save</button>
          </div>
          <div *ngIf="allforms == 'updateentity'" class="pull-right" style="margin-top: 25px;">
            <button type="button" mwlConfirmationPopover [popoverTitle]="popoverTitle" [confirmText]="confirmText"
              [cancelText]="cancelText" [popoverMessage]="popoverMessage" placement="left" (confirm)="onDeleteEntity(entityform.value)"
              class="btn btn-danger marginbtn pull-right" data-toggle="modal" data-tooltip="tooltip"
              data-original-title="Delete">
              <i class="fa fa-trash"></i>
            </button>
            <button [disabled]="!entityupsertform.form.valid" class="btn btn-success marginbtn pull-right" type="submit">Update</button>
            <!-- <button (click)="onDeleteEntity(entityform.value)" type="button" id="btn_firmdiv" class="btn btn-danger marginbtn"
                data-toggle="modal" data-target="#Mymodel-FirmDivDelete" data-tooltip="tooltip" data-placement="top"
                title="" value="" data-original-title="Delete">
                <i class="fa fa-trash"></i>
              </button> -->

          </div>

        </div>
      </form>
    </div>

    <div class="" *ngIf="allforms == 'dimensiondata'">
     
        <div class="gridrole" style="border: 1px solid rgb(204, 204, 204); padding: 20px; border-radius: 3px;">

          <mat-checkbox *ngFor="let item of dimensionsEntityBased" value="item.dimensionId" [checked]="item.value" class="example-margin">
          {{item.dimensionName}} 
          </mat-checkbox>
          <a class="pull-right btn btn-primary" (click)=selectDimension(2)>Select Dimensions
          </a>
        </div>
    </div>
  </div>
</div>